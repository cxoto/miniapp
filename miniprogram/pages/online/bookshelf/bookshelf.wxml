<view class="online-bookshelf">
  <!-- ç”¨æˆ·ä¿¡æ¯åŒºåŸŸ -->
  <view class="user-section" wx:if="{{userInfo}}">
    <image class="avatar" src="{{userInfo.avatar}}" mode="aspectFill" />
    <view class="user-info">
      <text class="username">{{userInfo.username}}</text>
      <text class="stats">ä¹¦æ¶: {{userInfo.bookshelfCount}}æœ¬ | é˜…è¯»æ—¶é•¿: {{readingHours}}å°æ—¶</text>
    </view>
    <view class="search-btn" bindtap="goToSearch">
      <text class="icon">ğŸ”</text>
    </view>
  </view>

  <!-- åˆ†ç»„æ ‡ç­¾ -->
  <scroll-view class="group-tabs" scroll-x enable-flex>
    <view
      class="group-tab {{currentGroupId === item.groupId ? 'active' : ''}}"
      wx:for="{{bookGroups}}"
      wx:key="groupId"
      data-groupid="{{item.groupId}}"
      bindtap="onGroupChange"
    >
      <text>{{item.groupName}}</text>
    </view>
  </scroll-view>

  <!-- ä¹¦æ¶åˆ—è¡¨ -->
  <view class="book-list" wx:if="{{!loading && filteredBookList.length > 0}}">
    <view
      class="book-item"
      wx:for="{{filteredBookList}}"
      wx:key="bookUrl"
      data-bookurl="{{item.bookUrl}}"
      bindtap="openBook"
      bindlongpress="onLongPressBook"
    >
      <image class="book-cover" src="{{item.coverUrl}}" mode="aspectFill" />
      <view class="book-info">
        <text class="book-name">{{item.name}}</text>
        <text class="book-author">ä½œè€…: {{item.author}}</text>
        <text class="book-progress">{{item.durChapterTitle}}</text>
        <text class="book-time">æ¥æº: {{item.originName}}</text>
      </view>
      <view class="book-status">
        <text class="remaining">å…±{{item.totalChapterNum}}ç« </text>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:if="{{!loading && filteredBookList.length === 0}}">
    <text class="empty-icon">ğŸ“š</text>
    <text class="empty-text">ä¹¦æ¶ç©ºç©ºå¦‚ä¹Ÿ</text>
    <view class="empty-btn" bindtap="goToSearch">
      <text>å»æœç´¢ä¹¦ç±</text>
    </view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading-state" wx:if="{{loading}}">
    <text>åŠ è½½ä¸­...</text>
  </view>
</view>
