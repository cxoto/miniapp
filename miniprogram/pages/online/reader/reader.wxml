<view class="online-reader" style="background-color: {{bgColor}}; color: {{textColor}};">
  <!-- 加载状态 -->
  <view class="loading" wx:if="{{loading}}">
    <text>加载中...</text>
  </view>

  <!-- 章节内容 -->
  <view class="reader-content" wx:if="{{!loading && chapterContent}}">
    <!-- 章节标题 -->
    <view class="chapter-title">
      <text>{{chapterContent.chapterTitle}}</text>
    </view>

    <!-- 正文内容 -->
    <view class="chapter-text" style="font-size: {{fontSize}}px; color: {{textColor}};">
      <text>{{chapterContent.content}}</text>
    </view>

    <!-- 导航按钮 -->
    <view class="chapter-nav">
      <view
        class="nav-btn {{chapterContent.previousChapter === null ? 'disabled' : ''}}"
        bindtap="prevChapter"
      >
        <text>上一章</text>
      </view>
      <view class="nav-btn catalog-btn" bindtap="toggleCatalog">
        <text>目录</text>
      </view>
      <view
        class="nav-btn {{chapterContent.nextChapter === null ? 'disabled' : ''}}"
        bindtap="nextChapter"
      >
        <text>下一章</text>
      </view>
    </view>

    <!-- 阅读设置 -->
    <view class="reader-settings">
      <view class="setting-row">
        <text class="setting-label">字体大小</text>
        <view class="font-controls">
          <view class="control-btn" bindtap="decreaseFontSize">
            <text>A-</text>
          </view>
          <text class="font-size-display">{{fontSize}}</text>
          <view class="control-btn" bindtap="increaseFontSize">
            <text>A+</text>
          </view>
        </view>
      </view>
      <view class="setting-row">
        <text class="setting-label">背景颜色</text>
        <view class="color-options">
          <view
            class="color-option"
            style="background-color: #fff; border: 1rpx solid #ddd;"
            data-color="#fff"
            data-textcolor="#333"
            bindtap="changeBgColor"
          ></view>
          <view
            class="color-option"
            style="background-color: #f5f5dc;"
            data-color="#f5f5dc"
            data-textcolor="#333"
            bindtap="changeBgColor"
          ></view>
          <view
            class="color-option"
            style="background-color: #e8f5e9;"
            data-color="#e8f5e9"
            data-textcolor="#333"
            bindtap="changeBgColor"
          ></view>
          <view
            class="color-option"
            style="background-color: #2d2d2d;"
            data-color="#2d2d2d"
            data-textcolor="#e0e0e0"
            bindtap="changeBgColor"
          ></view>
        </view>
      </view>
    </view>
  </view>

  <!-- 目录弹窗 -->
  <view class="catalog-modal" wx:if="{{showCatalog}}">
    <view class="catalog-mask" bindtap="closeCatalog"></view>
    <view class="catalog-content">
      <view class="catalog-header">
        <text class="catalog-title">目录</text>
        <text class="catalog-close" bindtap="closeCatalog">✕</text>
      </view>
      <scroll-view class="catalog-list" scroll-y>
        <view
          class="catalog-item {{item.chapterIndex === currentChapterIndex ? 'active' : ''}}"
          wx:for="{{chapterList}}"
          wx:key="chapterIndex"
          data-index="{{item.chapterIndex}}"
          bindtap="selectChapter"
        >
          <text class="chapter-name">{{item.chapterTitle}}</text>
          <text class="chapter-info">{{item.wordCount}}字</text>
        </view>
      </scroll-view>
    </view>
  </view>
</view>
