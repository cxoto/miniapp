# 项目功能需求说明

## 概述
在现有XCTools微信小程序基础上，新增两大核心功能模块，要求与主流产品的UI/UX保持一致。

## 功能模块详细需求

### 1. 阅读功能（微信阅读克隆）
**目标**：实现与微信阅读相同的阅读体验和功能

**核心功能需求**：
- 书架管理：书籍添加、删除、分类
- 阅读界面：
  - 仿微信阅读的翻页动画和排版
  - 字体大小、背景颜色、亮度调节
  - 目录跳转、书签功能
  - 进度保存和同步
- 书籍导入：支持txt、epub格式
- 阅读统计：阅读时长、进度百分比
- 搜索高亮和笔记功能

**UI要求**：
- 书架界面：网格布局，书籍封面显示
- 阅读界面：与微信阅读一致的排版和配色方案
- 设置面板：底部弹出式菜单设计

### 2. 任务管理（Microsoft To Do克隆）
**目标**：实现Microsoft To Do的核心任务管理功能

**核心功能需求**：
- 任务列表管理：创建、编辑、删除列表
- 任务项功能：
  - 添加、完成、星标任务
  - 设置截止日期和提醒
  - 子任务和备注支持
- 智能列表：今天、重要、计划内、任务
- 数据同步：本地存储，支持多设备同步（后期）
- 任务搜索和筛选

**UI要求**：
- 左侧导航栏列表结构
- 右侧任务详情面板
- Microsoft Fluent Design设计语言
- 使用微软品牌的色彩体系

## 技术实现要求

### 架构规划
```
miniprogram/
  pages/
    reader/           # 阅读功能
      bookshelf/      # 书架页面
      reader/         # 阅读页面
      search/         # 书籍搜索
    todo/            # 任务管理
      lists/         # 列表管理
      tasks/         # 任务详情
      today/         # 今日任务
```

### 数据存储方案
- 使用微信小程序的本地存储进行数据持久化
- 书籍文件存储在本地缓存
- 考虑使用云开发进行多设备同步（可选）

### 开发优先级建议
1. 先实现阅读功能的基础框架
2. 开发任务管理模块
3. 优化各模块的交互细节

## 注意事项
- 保持现有小程序的整体风格一致性
- 确保在多平台（小程序、iOS、Android）上的兼容性
- 注意性能优化，特别是大文件阅读时的内存管理
- 遵循微信小程序的开发规范和限制

---

## 开发进度记录

### 已完成功能 ✅

#### 阅读功能（2024-11-23）
- [x] 书架页面 (`pages/reader/bookshelf/`)
  - 书籍网格展示
  - 书籍添加（从文件/聊天记录导入）
  - 书籍删除（批量管理）
  - 分类筛选（全部/在读/已读完）
- [x] 阅读器页面 (`pages/reader/reading/`)
  - TXT 格式解析和显示
  - 自动章节识别
  - 字体大小调节（24-48rpx）
  - 行间距调节（紧凑/适中/宽松）
  - 背景主题（白色/护眼绿/羊皮纸/夜间模式）
  - 翻页模式（滑动/滚动）
  - 目录跳转
  - 书签功能（添加/删除/列表）
  - 进度保存和恢复
- [x] tabBar 入口已添加

#### 任务管理功能（2024-11-23）
- [x] 任务列表页面 (`pages/todo/lists/`)
  - 智能列表（我的一天/重要/计划内/全部）
  - 自定义列表（创建/重命名/删除）
  - 任务添加/完成/星标
  - 截止日期设置
  - 排序功能
  - Microsoft Fluent Design 风格
- [x] 任务详情页面 (`pages/todo/detail/`)
  - 任务编辑
  - 子任务支持
  - 添加到"我的一天"
  - 截止日期/提醒/重复设置
  - 列表移动
  - 备注功能
- [x] tabBar 入口已添加

### 待完善功能 🔧

#### 阅读功能
- [ ] EPUB 格式完整支持
- [ ] 搜索高亮功能
- [ ] 笔记功能
- [ ] 阅读时长统计

#### 任务管理
- [ ] 任务搜索功能
- [ ] 云同步功能
- [ ] 提醒通知功能

### 图标说明 📝
当前使用占位图标，需要替换为正式图标：
- `images/book.png` / `images/book1.png` - 阅读功能图标
- `images/todo.png` / `images/todo1.png` - 任务管理图标